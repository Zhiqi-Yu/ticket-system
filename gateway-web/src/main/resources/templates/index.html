<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"><title>Gateway</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f6f7fb;margin:0}
    .wrap{max-width:960px;margin:56px auto;padding:0 20px}
    .card{background:#fff;border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,.06);padding:28px}
    h1{margin:0 0 16px;font-size:28px}
    a{color:#2563eb;text-decoration:none} a:hover{text-decoration:underline}
    ul{line-height:2}
  </style>
</head>
<body><div class="wrap">
  <div class="card">
    <h1>Welcome To Ticket System!</h1>
    <p>Go to Login â†’ <a href="/login">/login</a></p>
<!--    <ul>-->
<!--      <li><a href="/user">User Dashboard</a></li>-->
<!--      <li><a href="/manager">Manager Dashboard</a></li>-->
<!--      <li><a href="/admin">Admin Dashboard</a></li>-->
<!--    </ul>-->
  </div>
</div>

<script>
  (async ()=>{
    try{
      const r=await fetch('http://localhost:8081/api/me',{credentials:'include'});
      if(!r.ok) return;
      const me=await r.json();
      const roles=(me.roles||[]);
      if(roles.includes('ROLE_ADMIN'))   location.href='/admin';
      else if(roles.includes('ROLE_MANAGER')) location.href='/manager';
      else if(roles.includes('ROLE_USER'))    location.href='/user';
    }catch(_){}
  })();
</script>


</body>
</html>
